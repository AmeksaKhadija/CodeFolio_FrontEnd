{"ast":null,"code":"import { ApolloClient, InMemoryCache, createHttpLink } from \"@apollo/client\";\nimport { setContext } from \"@apollo/client/link/context\";\nimport { getToken } from \"../utils/token\";\nconst httpLink = createHttpLink({\n  uri: \"http://localhost:4000/graphql\",\n  // wrapper fetch pour logger la requête\n  fetch: (uri, options) => {\n    console.debug(\"Apollo Request:\", {\n      url: uri,\n      method: options.method,\n      headers: options.headers,\n      body: options.body ? JSON.parse(options.body) : null\n    });\n    return fetch(uri, options).then(response => {\n      console.debug(\"Apollo Response Status:\", response.status);\n      return response;\n    });\n  }\n});\nconst authLink = setContext((_, {\n  headers\n}) => {\n  const token = getToken();\n  return {\n    headers: {\n      ...headers,\n      ...(token ? {\n        Authorization: `Bearer ${token}`\n      } : {})\n    }\n  };\n});\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache()\n});\nexport default client;","map":{"version":3,"names":["ApolloClient","InMemoryCache","createHttpLink","setContext","getToken","httpLink","uri","fetch","options","console","debug","url","method","headers","body","JSON","parse","then","response","status","authLink","_","token","Authorization","client","link","concat","cache"],"sources":["C:/Users/Youcode/Desktop/2ème annèe/codefolio-react-app/src/apollo/client.js"],"sourcesContent":["import { ApolloClient, InMemoryCache, createHttpLink } from \"@apollo/client\";\nimport { setContext } from \"@apollo/client/link/context\";\nimport { getToken } from \"../utils/token\";\n\nconst httpLink = createHttpLink({\n  uri: \"http://localhost:4000/graphql\",\n  // wrapper fetch pour logger la requête\n  fetch: (uri, options) => {\n    console.debug(\"Apollo Request:\", {\n      url: uri,\n      method: options.method,\n      headers: options.headers,\n      body: options.body ? JSON.parse(options.body) : null,\n    });\n    return fetch(uri, options).then((response) => {\n      console.debug(\"Apollo Response Status:\", response.status);\n      return response;\n    });\n  },\n});\n\nconst authLink = setContext((_, { headers }) => {\n  const token = getToken();\n  return {\n    headers: {\n      ...headers,\n      ...(token ? { Authorization: `Bearer ${token}` } : {}),\n    },\n  };\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache(),\n});\n\nexport default client;\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,aAAa,EAAEC,cAAc,QAAQ,gBAAgB;AAC5E,SAASC,UAAU,QAAQ,6BAA6B;AACxD,SAASC,QAAQ,QAAQ,gBAAgB;AAEzC,MAAMC,QAAQ,GAAGH,cAAc,CAAC;EAC9BI,GAAG,EAAE,+BAA+B;EACpC;EACAC,KAAK,EAAEA,CAACD,GAAG,EAAEE,OAAO,KAAK;IACvBC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAE;MAC/BC,GAAG,EAAEL,GAAG;MACRM,MAAM,EAAEJ,OAAO,CAACI,MAAM;MACtBC,OAAO,EAAEL,OAAO,CAACK,OAAO;MACxBC,IAAI,EAAEN,OAAO,CAACM,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACR,OAAO,CAACM,IAAI,CAAC,GAAG;IAClD,CAAC,CAAC;IACF,OAAOP,KAAK,CAACD,GAAG,EAAEE,OAAO,CAAC,CAACS,IAAI,CAAEC,QAAQ,IAAK;MAC5CT,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEQ,QAAQ,CAACC,MAAM,CAAC;MACzD,OAAOD,QAAQ;IACjB,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AAEF,MAAME,QAAQ,GAAGjB,UAAU,CAAC,CAACkB,CAAC,EAAE;EAAER;AAAQ,CAAC,KAAK;EAC9C,MAAMS,KAAK,GAAGlB,QAAQ,CAAC,CAAC;EACxB,OAAO;IACLS,OAAO,EAAE;MACP,GAAGA,OAAO;MACV,IAAIS,KAAK,GAAG;QAAEC,aAAa,EAAE,UAAUD,KAAK;MAAG,CAAC,GAAG,CAAC,CAAC;IACvD;EACF,CAAC;AACH,CAAC,CAAC;AAEF,MAAME,MAAM,GAAG,IAAIxB,YAAY,CAAC;EAC9ByB,IAAI,EAAEL,QAAQ,CAACM,MAAM,CAACrB,QAAQ,CAAC;EAC/BsB,KAAK,EAAE,IAAI1B,aAAa,CAAC;AAC3B,CAAC,CAAC;AAEF,eAAeuB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}